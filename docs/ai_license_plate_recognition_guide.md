# AI 번호판 인식 기술 교육 자료

## 카메라 영상에서 자동차 번호판을 인식하는 AI 기술의 이해

이 문서는 카메라로 촬영한 영상에서 자동차 번호판을 자동으로 인식하는 AI 기술을 초보자도 쉽게 이해할 수 있도록 설명합니다.

---

## 목차

1. [전체 프로세스 개요](#1-전체-프로세스-개요)
2. [1단계: 영상 입력](#2-1단계-영상-입력)
3. [2단계: 이미지 전처리](#3-2단계-이미지-전처리)
4. [3단계: 번호판 검출 (Object Detection)](#4-3단계-번호판-검출-object-detection)
5. [4단계: 문자 인식 (OCR)](#5-4단계-문자-인식-ocr)
6. [5단계: 후처리 및 결과 출력](#6-5단계-후처리-및-결과-출력)
7. [핵심 AI 기술 상세 설명](#7-핵심-ai-기술-상세-설명)
8. [실제 구현 예시](#8-실제-구현-예시)

---

## 1. 전체 프로세스 개요

### 번호판 인식의 전체 흐름

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  카메라     │ -> │  이미지     │ -> │  번호판     │ -> │  문자       │ -> │  결과       │
│  영상 입력  │    │  전처리     │    │  검출(AI)   │    │  인식(AI)   │    │  출력       │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
                                            │                  │
                                            ▼                  ▼
                                      딥러닝 모델         OCR 엔진
                                      (YOLO, CNN)      (Tesseract, EasyOCR)
```

### 각 단계별 역할

| 단계 | 역할 | 사용 기술 |
|------|------|-----------|
| 영상 입력 | 카메라에서 이미지 획득 | OpenCV, 카메라 드라이버 |
| 이미지 전처리 | 인식률 향상을 위한 이미지 보정 | OpenCV (필터, 변환) |
| 번호판 검출 | 이미지에서 번호판 위치 찾기 | **딥러닝 (YOLO, CNN)** |
| 문자 인식 | 번호판의 글자 읽기 | **OCR (Tesseract, EasyOCR)** |
| 후처리 | 인식 결과 검증 및 보정 | 정규표현식, 규칙 기반 |

---

## 2. 1단계: 영상 입력

### 카메라에서 이미지 가져오기

```
┌──────────────────────────────────────────────────────────────┐
│                        카메라 영상                            │
│  ┌────────────────────────────────────────────────────────┐  │
│  │                                                        │  │
│  │     🚗  ← 자동차                                       │  │
│  │    ┌─────────┐                                         │  │
│  │    │ 12가3456│ ← 번호판                                │  │
│  │    └─────────┘                                         │  │
│  │                                                        │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                              │
│  해상도: 1920 x 1080 (Full HD)                               │
│  프레임: 30 FPS                                              │
└──────────────────────────────────────────────────────────────┘
```

### 중요 고려사항

- **해상도**: 높을수록 좋지만 처리 속도와 트레이드오프
- **조명**: 밤/낮, 역광 등 다양한 환경 고려
- **각도**: 정면이 아닌 비스듬한 각도에서도 인식 필요
- **거리**: 번호판 크기가 충분히 커야 인식 가능

---

## 3. 2단계: 이미지 전처리

### 왜 전처리가 필요한가?

카메라로 촬영한 원본 이미지는 다양한 문제가 있을 수 있습니다:
- 너무 어둡거나 밝음
- 흐릿함 (블러)
- 노이즈 (잡음)
- 색상 왜곡

### 전처리 과정

```
원본 이미지                    그레이스케일                    노이즈 제거
┌────────────┐               ┌────────────┐               ┌────────────┐
│ 🟥🟦🟨🟩   │     →        │ ⬜⬛⬜⬛   │     →        │ ⬜⬛⬜⬛   │
│ 컬러 이미지 │   변환        │ 흑백 이미지 │   필터        │ 깨끗한 이미지│
└────────────┘               └────────────┘               └────────────┘
                                                                 ↓
이진화 (Threshold)            엣지 검출                    윤곽선 추출
┌────────────┐               ┌────────────┐               ┌────────────┐
│ ⬜⬜⬛⬛   │     ←        │ ─ │ ─ │     │     ←        │ ┌──────┐   │
│ 흑/백 구분  │   변환        │ 경계선 추출 │   Canny      │ │번호판│   │
└────────────┘               └────────────┘               └────────────┘
```

### 주요 전처리 기법

#### 1) 그레이스케일 변환
```
컬러 (RGB) → 흑백 (Grayscale)
- 처리할 데이터량 1/3로 감소
- 색상 정보 제거로 일관된 처리 가능
```

#### 2) 노이즈 제거 (Gaussian Blur)
```
노이즈가 있는 이미지:        노이즈 제거 후:
■□■□■□■□                    ■■■■□□□□
□■□■□■□■         →          ■■■■□□□□
■□■□■□■□                    □□□□■■■■
(들쭉날쭉)                   (부드러움)
```

#### 3) 이진화 (Thresholding)
```
밝기 값: 0~255              이진화 결과 (임계값=127):
100 150 200 50      →       0   1   1   0
180 220 80  120             1   1   0   0
(회색조)                    (흑백만)
```

---

## 4. 3단계: 번호판 검출 (Object Detection)

### 🤖 여기서 AI가 사용됩니다!

번호판 검출은 **"이미지에서 번호판이 어디에 있는지 찾는 것"**입니다.
이것은 **객체 검출(Object Detection)**이라는 AI 기술을 사용합니다.

### 객체 검출이란?

```
입력 이미지:                          AI 처리 결과:
┌─────────────────────────┐          ┌─────────────────────────┐
│                         │          │                         │
│    🚗                   │          │    🚗                   │
│   ┌───────┐             │    →     │   ┌───────┐             │
│   │12가3456│             │   AI     │   │12가3456│ ← 검출!    │
│   └───────┘             │          │   └───────┘             │
│                         │          │   (x:100, y:200,        │
│                         │          │    w:150, h:40)         │
└─────────────────────────┘          └─────────────────────────┘

AI가 출력하는 정보:
- 번호판 위치 (x, y 좌표)
- 번호판 크기 (너비, 높이)
- 신뢰도 (얼마나 확실한지, 예: 95%)
```

### 사용되는 AI 모델들

#### 1) YOLO (You Only Look Once)

**YOLO는 현재 가장 인기 있는 객체 검출 AI입니다.**

```
YOLO의 작동 방식:

1. 이미지를 그리드(격자)로 나눔
   ┌───┬───┬───┐
   │ 1 │ 2 │ 3 │
   ├───┼───┼───┤
   │ 4 │ 5 │ 6 │  ← 각 칸에서 객체 검출
   ├───┼───┼───┤
   │ 7 │ 8 │ 9 │
   └───┴───┴───┘

2. 각 그리드 셀에서 동시에 객체 검출
   - "이 셀에 객체가 있는가?"
   - "있다면 무엇인가? (번호판? 자동차?)"
   - "정확한 위치와 크기는?"

3. 한 번의 처리로 모든 결과 출력 (빠름!)
```

**YOLO 버전별 특징:**

| 버전 | 특징 | 속도 | 정확도 |
|------|------|------|--------|
| YOLOv5 | 가볍고 빠름 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| YOLOv8 | 최신, 균형 좋음 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| YOLOv9 | 가장 정확 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |

#### 2) CNN (Convolutional Neural Network)

**CNN은 이미지를 이해하는 기본적인 딥러닝 구조입니다.**

```
CNN의 구조:

입력 이미지    →    특징 추출    →    분류/검출
                   (Convolution)
┌─────────┐      ┌─────────────┐      ┌─────────┐
│         │      │ 필터 적용    │      │ 번호판? │
│ 원본    │  →   │ ┌─┐         │  →   │  YES    │
│ 이미지  │      │ │▤│ 패턴인식 │      │  95%    │
│         │      │ └─┘         │      │         │
└─────────┘      └─────────────┘      └─────────┘
```

**CNN이 학습하는 것:**

```
레이어 1: 기본 특징         레이어 2: 복잡한 특징       레이어 3: 객체 인식
┌─────┐                    ┌─────┐                    ┌─────┐
│ ─   │ 수평선             │ ┌─┐ │ 모서리              │ □□□ │ 번호판
│ │   │ 수직선             │ └─┘ │ 사각형              │ 123 │ 형태
│ /   │ 대각선             │ ○   │ 원형                └─────┘
└─────┘                    └─────┘
```

### 딥러닝 모델이 학습하는 과정

```
학습 데이터 (수천~수만 장의 이미지):

이미지 1:                    이미지 2:                    이미지 3:
┌─────────────┐              ┌─────────────┐              ┌─────────────┐
│    🚗       │              │        🚙   │              │  🚗         │
│  ┌─────┐    │              │      ┌─────┐│              │     ┌─────┐ │
│  │12가34│    │              │      │56나78││              │     │90다12│ │
│  └─────┘    │              │      └─────┘│              │     └─────┘ │
└─────────────┘              └─────────────┘              └─────────────┘
     ↓                            ↓                            ↓
정답: (x:50,y:100,w:80,h:30) 정답: (x:150,y:80,w:75,h:28) 정답: (x:120,y:110,w:82,h:32)

        ↓                         ↓                            ↓
        └─────────────────────────┼────────────────────────────┘
                                  ↓
                          ┌──────────────┐
                          │   AI 모델    │
                          │   학습 중... │
                          │  패턴 파악   │
                          └──────────────┘
                                  ↓
                          "번호판은 이렇게 생겼구나!"
                          - 직사각형 모양
                          - 가로:세로 = 약 2~3:1
                          - 안에 글자가 있음
                          - 보통 차량 하단에 위치
```

---

## 5. 4단계: 문자 인식 (OCR)

### 🤖 여기서도 AI가 사용됩니다!

OCR (Optical Character Recognition, 광학 문자 인식)은
**"이미지 속의 글자를 텍스트로 변환하는 기술"**입니다.

### OCR의 작동 원리

```
번호판 이미지:              문자 분리:                  각 문자 인식:
┌─────────────┐           ┌─┬─┬─┬─┬─┬─┬─┐
│  12가 3456  │     →     │1│2│가│3│4│5│6│     →     "12가3456"
└─────────────┘           └─┴─┴─┴─┴─┴─┴─┘
                               ↓ ↓ ↓
                          각 글자를 AI가 인식

                          "1" → 숫자 1
                          "2" → 숫자 2
                          "가" → 한글 가
                          ...
```

### OCR 기술의 종류

#### 1) Tesseract OCR (전통적 방식)

```
Tesseract의 처리 과정:

1. 이미지 이진화
   ┌─────────────┐      ┌─────────────┐
   │  12가3456   │  →   │  ██ █ ████  │
   └─────────────┘      └─────────────┘

2. 글자 영역 분리
   ┌─┬─┬─┬─┬─┬─┬─┐
   │█│█│█│█│█│█│█│
   └─┴─┴─┴─┴─┴─┴─┘

3. 각 글자 패턴 매칭
   글자 "1"의 특징:
   - 수직선 1개
   - 상단에 작은 획

   글자 "가"의 특징:
   - ㄱ + ㅏ 조합
   - 특정 비율과 위치
```

#### 2) EasyOCR (딥러닝 방식)

```
EasyOCR의 장점:

┌─────────────────────────────────────────────────────────┐
│                                                         │
│  ✅ 다양한 폰트 인식                                     │
│     - 기울어진 글자도 OK                                 │
│     - 손상된 글자도 OK                                   │
│                                                         │
│  ✅ 다국어 지원                                          │
│     - 한국어 + 영어 동시 인식                            │
│     - 80개 이상 언어 지원                                │
│                                                         │
│  ✅ 딥러닝 기반                                          │
│     - 학습된 패턴으로 높은 정확도                         │
│     - 새로운 폰트도 잘 인식                              │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**EasyOCR의 내부 구조:**

```
입력 이미지 → [특징 추출 CNN] → [순차 처리 RNN] → [문자 출력]

1. CNN으로 이미지 특징 추출
   이미지 → [Conv] → [Conv] → [Conv] → 특징맵

2. RNN으로 순차적 문자 인식
   특징맵 → [LSTM] → [LSTM] → 문자 시퀀스

3. CTC로 최종 문자열 생성
   문자 시퀀스 → [CTC Decoder] → "12가3456"
```

### 한국 번호판 인식의 특수성

```
한국 번호판 형식:

구형 (2006년 이전):          신형 (2006년 이후):
┌─────────────────┐          ┌─────────────────┐
│  서울 12가3456  │          │   123가 4567    │
└─────────────────┘          └─────────────────┘
  지역 + 숫자 + 한글 + 숫자      숫자 + 한글 + 숫자

인식해야 할 문자:
- 숫자: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9
- 한글: 가, 나, 다, 라, 마, 거, 너, 더, 러, 머, 버, 서, 어, 저, ...
- 지역: 서울, 부산, 대구, 인천, 광주, 대전, 울산, 경기, ...
```

---

## 6. 5단계: 후처리 및 결과 출력

### 후처리가 필요한 이유

AI가 항상 100% 정확하지는 않습니다. 후처리로 오류를 줄입니다.

```
OCR 원본 결과:              후처리 후:
"l2가345B"                  "12가3456"
   ↓                           ↓
   l → 1 (소문자 L을 숫자 1로)
   B → 6 (B를 6으로, 번호판에는 B가 없음)
```

### 후처리 규칙 예시

```
한국 번호판 규칙 적용:

1. 길이 검증
   - 신형: 7~8자리
   - 구형: 9~10자리

2. 형식 검증
   - 신형: 숫자3 + 한글1 + 숫자4
   - 예: 123가4567 ✓
   - 예: 12가34567 ✗

3. 한글 검증
   - 허용된 한글만 사용
   - "가나다라마..."만 허용
   - "갸걔거겨..." 불허

4. 유사 문자 보정
   - 0 ↔ O, D
   - 1 ↔ I, l
   - 5 ↔ S
   - 8 ↔ B
```

---

## 7. 핵심 AI 기술 상세 설명

### 7.1 신경망 (Neural Network) 기초

```
생물학적 뉴런:                     인공 뉴런:

    입력1 ──→ ○                    x1 ──→ [w1]──┐
    입력2 ──→ (뉴런) ──→ 출력       x2 ──→ [w2]──┼──→ Σ ──→ f(x) ──→ 출력
    입력3 ──→ ○                    x3 ──→ [w3]──┘

                                   w = 가중치 (중요도)
                                   Σ = 합계
                                   f = 활성화 함수
```

**가중치(Weight)의 역할:**

```
번호판 인식에서:

입력: 픽셀 밝기값들
가중치: 각 픽셀의 중요도

예) 숫자 "1" 인식:
┌───────────┐
│  ■        │  중앙 세로줄의 가중치가 높음
│  ■        │  → 이 부분이 밝으면 "1"일 확률 높음
│  ■        │
│  ■        │
└───────────┘
```

### 7.2 합성곱 신경망 (CNN) 상세

```
CNN의 핵심 연산: 합성곱 (Convolution)

입력 이미지 (5x5):          필터 (3x3):          출력 (3x3):
┌─────────────────┐        ┌─────────┐         ┌─────────┐
│ 1  2  3  4  5   │        │ 1  0 -1 │         │ 결과값  │
│ 2  3  4  5  6   │   *    │ 1  0 -1 │    =    │ 계산됨  │
│ 3  4  5  6  7   │        │ 1  0 -1 │         │         │
│ 4  5  6  7  8   │        └─────────┘         └─────────┘
│ 5  6  7  8  9   │
└─────────────────┘

필터가 이미지 위를 이동하며 특징 추출:

스텝 1:              스텝 2:              스텝 3:
┌───┬───┬───┐       ┌───┬───┬───┐       ┌───┬───┬───┐
│ ■ │ ■ │ ■ │ □ □   □ │ ■ │ ■ │ ■ │ □   □ □ │ ■ │ ■ │ ■ │
├───┼───┼───┤       ├───┼───┼───┤       ├───┼───┼───┤
│ ■ │ ■ │ ■ │ □ □   □ │ ■ │ ■ │ ■ │ □   □ □ │ ■ │ ■ │ ■ │
├───┼───┼───┤       ├───┼───┼───┤       ├───┼───┼───┤
│ ■ │ ■ │ ■ │ □ □   □ │ ■ │ ■ │ ■ │ □   □ □ │ ■ │ ■ │ ■ │
└───┴───┴───┘       └───┴───┴───┘       └───┴───┴───┘
```

**각 레이어가 학습하는 것:**

```
레이어 1 (Low-level):     레이어 2 (Mid-level):    레이어 3 (High-level):
┌─────┐ ┌─────┐          ┌─────┐ ┌─────┐         ┌─────────┐
│ ─── │ │ │││ │          │ ┌─┐ │ │ ○○○ │         │ 12가3456│
│     │ │ │││ │          │ └─┘ │ │ ○○○ │         │ 번호판! │
└─────┘ └─────┘          └─────┘ └─────┘         └─────────┘
 수평선   수직선            모서리    곡선          완전한 객체
```

### 7.3 YOLO 알고리즘 상세

```
YOLO의 작동 원리:

1. 이미지를 SxS 그리드로 분할 (예: 7x7 = 49칸)

   ┌───┬───┬───┬───┬───┬───┬───┐
   │   │   │   │   │   │   │   │
   ├───┼───┼───┼───┼───┼───┼───┤
   │   │   │   │   │   │   │   │
   ├───┼───┼───┼───┼───┼───┼───┤
   │   │   │ 🚗│   │   │   │   │ ← 객체 중심이 있는 셀
   ├───┼───┼───┼───┼───┼───┼───┤
   │   │   │   │   │   │   │   │
   ├───┼───┼───┼───┼───┼───┼───┤
   │   │   │   │   │   │   │   │
   └───┴───┴───┴───┴───┴───┴───┘

2. 각 셀에서 예측:
   - B개의 바운딩 박스 (위치, 크기)
   - 각 박스의 신뢰도 (confidence)
   - C개 클래스의 확률

3. 출력:
   셀 (3,3)의 출력:
   ┌────────────────────────────────────────┐
   │ 박스1: x=0.5, y=0.5, w=0.3, h=0.1,     │
   │        confidence=0.95                  │
   │ 클래스: 번호판=0.98, 자동차=0.02       │
   └────────────────────────────────────────┘
```

### 7.4 RNN과 LSTM (OCR에서 사용)

```
순차 데이터 처리의 필요성:

번호판 "12가3456"을 읽을 때:

왼쪽 → 오른쪽으로 순서대로 읽음:
"1" → "2" → "가" → "3" → "4" → "5" → "6"

이전 문자가 다음 문자 예측에 도움:
- "1" 다음에는 숫자가 올 확률 높음
- "가" 다음에는 숫자가 올 확률 높음 (한국 번호판 규칙)
```

**LSTM (Long Short-Term Memory):**

```
┌──────────────────────────────────────────────────────────┐
│  LSTM은 "기억"을 할 수 있는 신경망                        │
│                                                          │
│  일반 RNN:     정보가 멀리 전달되면 잊어버림              │
│  LSTM:         중요한 정보를 오래 기억할 수 있음          │
│                                                          │
│  번호판 예시:                                             │
│  "서울12가3456"                                          │
│     ↑                                                    │
│  "서울"이라는 정보를 끝까지 기억                         │
│  → 이 번호판은 서울 지역 번호판임을 인식                  │
└──────────────────────────────────────────────────────────┘
```

---

## 8. 실제 구현 예시

### 전체 시스템 구조

```
┌─────────────────────────────────────────────────────────────────┐
│                     번호판 인식 시스템                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐  │
│  │ 스마트폰 │    │ Raspberry│    │  AI 처리 │    │   결과   │  │
│  │  카메라  │ →  │    Pi    │ →  │          │ →  │   출력   │  │
│  └──────────┘    └──────────┘    └──────────┘    └──────────┘  │
│       ↓               ↓               ↓               ↓        │
│   영상 촬영       영상 수신        검출+인식        저장/전송   │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  사용 기술:                                                     │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ • OpenCV: 이미지 처리                                    │   │
│  │ • YOLOv8: 번호판 검출 (딥러닝)                           │   │
│  │ • EasyOCR: 문자 인식 (딥러닝)                            │   │
│  │ • Python: 프로그래밍 언어                                │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 간단한 코드 흐름

```python
# 1. 카메라에서 영상 가져오기
camera = cv2.VideoCapture('http://phone_ip:8080/video')
frame = camera.read()

# 2. 번호판 검출 (YOLO)
plates = yolo_model.detect(frame)
# 결과: [(x=100, y=200, w=150, h=40, confidence=0.95)]

# 3. 번호판 영역 추출
plate_image = frame[y:y+h, x:x+w]

# 4. 문자 인식 (EasyOCR)
text = ocr.readtext(plate_image)
# 결과: "12가3456"

# 5. 결과 출력
print(f"인식된 번호판: {text}")
```

---

## 요약: AI 기술 한눈에 보기

```
┌─────────────────────────────────────────────────────────────────┐
│                    번호판 인식 AI 기술 요약                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1️⃣ 영상 입력                                                   │
│     └─ OpenCV로 카메라 영상 처리                                │
│                                                                 │
│  2️⃣ 이미지 전처리                                               │
│     └─ 그레이스케일, 노이즈 제거, 이진화                        │
│                                                                 │
│  3️⃣ 번호판 검출 ⭐ AI                                           │
│     ├─ YOLO: 실시간 객체 검출                                   │
│     └─ CNN: 이미지 특징 추출                                    │
│                                                                 │
│  4️⃣ 문자 인식 ⭐ AI                                             │
│     ├─ Tesseract: 전통적 OCR                                    │
│     ├─ EasyOCR: 딥러닝 OCR (추천)                               │
│     └─ CNN + RNN + CTC: 내부 구조                               │
│                                                                 │
│  5️⃣ 후처리                                                      │
│     └─ 규칙 기반 검증 및 보정                                   │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  💡 핵심 개념:                                                   │
│                                                                 │
│  • 딥러닝: 데이터로부터 스스로 학습하는 AI                      │
│  • CNN: 이미지를 이해하는 신경망 구조                           │
│  • YOLO: 빠른 객체 검출 알고리즘                                │
│  • OCR: 이미지 속 글자를 텍스트로 변환                          │
│  • 학습: 수천~수만 장의 예시로 패턴을 익힘                      │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 다음 단계

1. **환경 설정**: Python, OpenCV, EasyOCR 설치
2. **카메라 연결**: 스마트폰 또는 ESP32-CAM 연결
3. **기본 테스트**: 이미지에서 문자 인식 테스트
4. **번호판 검출**: YOLO 모델 적용
5. **통합 시스템**: 실시간 번호판 인식 시스템 구축

---

## 참고 자료

- [YOLO 공식 문서](https://docs.ultralytics.com/)
- [EasyOCR GitHub](https://github.com/JaidedAI/EasyOCR)
- [OpenCV 튜토리얼](https://docs.opencv.org/master/d9/df8/tutorial_root.html)
- [딥러닝 기초 (3Blue1Brown)](https://www.youtube.com/playlist?list=PLZHQObOWTQDNU6R1_67000Dx_ZCJB-3pi)
